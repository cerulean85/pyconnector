# ğŸ“¦ Pyconnector ëª¨ë“ˆ ì„¤ëª…ì„œ

ì´ Python ëª¨ë“ˆì€ ë‹¤ìŒê³¼ ê°™ì€ ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ì—°ë™í•˜ê¸° ìœ„í•œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤:
* **MySQL**: ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™
* **Apache Kafka**: ë©”ì‹œì§€ í ì‹œìŠ¤í…œ
* **Elasticsearch**: ëŒ€ìš©ëŸ‰ í…ìŠ¤íŠ¸ ê¸°ë°˜ ê²€ìƒ‰ ë° ë¶„ì„
* **RabbitMQ**: ê²½ëŸ‰ ë©”ì‹œì§€ ë¸Œë¡œì»¤ ì‹œìŠ¤í…œ

ëª¨ë“ˆì„ ì‚¬ìš©í•˜ê¸° ì „ì— ë°˜ë“œì‹œ `settings.yml` íŒŒì¼ì„ ì‘ì„±í•´ì•¼ í•˜ë©°, ì‹œìŠ¤í…œ ì ‘ì†ì— í•„ìš”í•œ ì •ë³´ë“¤ì„ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤.

---

## âš™ï¸ ì„¤ì • íŒŒì¼ (`settings.yml`) êµ¬ì¡°

ì•„ë˜ëŠ” `settings.yml` íŒŒì¼ì— í¬í•¨ë˜ì–´ì•¼ í•˜ëŠ” ê° í•­ëª©ê³¼ ê·¸ ì„¤ëª…ì…ë‹ˆë‹¤:

| ì„¹ì…˜       | ì†ì„±            | ì„¤ëª…                                      | ì˜ˆì‹œ ê°’        |
| -------- | ------------- | --------------------------------------- | ----------- |
| `db`     | `address`     | ë°ì´í„°ë² ì´ìŠ¤ ì„œë²„ ì£¼ì†Œ                            | `127.0.0.1` |
|          | `port`        | ë°ì´í„°ë² ì´ìŠ¤ í¬íŠ¸ ë²ˆí˜¸ (ê¸°ë³¸ MySQL: `3306`)         | `3306`      |
|          | `name`        | ì ‘ì†í•  ë°ì´í„°ë² ì´ìŠ¤ ì´ë¦„                           | `anydb`     |
|          | `username`    | ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ìš©ì ì´ë¦„                           | `user`      |
|          | `password`    | ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ìš©ì ë¹„ë°€ë²ˆí˜¸                         | `pwd`       |
|          | `auto_commit` | ì¿¼ë¦¬ ì‹¤í–‰ ì‹œ ìë™ìœ¼ë¡œ ì»¤ë°‹í• ì§€ ì—¬ë¶€ (`True` / `False`) | `True`      |
| `es`     | `address`     | Elasticsearch ì„œë²„ ì£¼ì†Œ                     | `127.0.0.1` |
|          | `port`        | Elasticsearch í¬íŠ¸ ë²ˆí˜¸ (ê¸°ë³¸: `9200`)        | `9200`      |
| `kafka`  | `address`     | Kafka ë¸Œë¡œì»¤ ì£¼ì†Œ                            | `127.0.0.1` |
|          | `port`        | Kafka ë¸Œë¡œì»¤ í¬íŠ¸ ë²ˆí˜¸ (ê¸°ë³¸: `9092`)            | `9092`      |

---

## ğŸ§© ì£¼ìš” í•¨ìˆ˜ ë° ê¸°ëŠ¥

ë‹¤ìŒì€ ì´ ëª¨ë“ˆì—ì„œ ì œê³µí•˜ëŠ” í•µì‹¬ ê¸°ëŠ¥ë“¤ê³¼ ê·¸ ìœ„ì¹˜ì…ë‹ˆë‹¤:

| ëª¨ë“ˆ ìœ„ì¹˜                     | í•¨ìˆ˜                       | ì„¤ëª…                                     |
| ------------------------- | ------------------------ | -------------------------------------- |
| `handler.EarthlingDBPool` | `exec(...)`              | SQL ì¿¼ë¦¬ ì‹¤í–‰ í•¨ìˆ˜. SELECT, UPDATE ë“±ì˜ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰ |
| `handler.earthling_es`    | `insert_list_to_es(...)` | ë°ì´í„° ë¦¬ìŠ¤íŠ¸ë¥¼ Elasticsearchì˜ íŠ¹ì • ì¸ë±ìŠ¤ì— ì €ì¥     |
| `handler.earthling_mq`    | `consume()`              | Kafkaì—ì„œ ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•˜ê³ , íŒŒì¼ë¡œ ì €ì¥ í›„ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸   |
| `handler.earthling_mq`    | `consume_action(...)`    | Kafkaì—ì„œ ìˆ˜ì‹ í•œ ë©”ì‹œì§€ë¥¼ JSON í˜•íƒœë¡œ ë””ì½”ë”©          |
| `handler.earthling_mq`    | `produce_action(...)`    | ë©”ì‹œì§€ë¥¼ Kafka ì „ì†¡ì„ ìœ„í•´ JSON ë¬¸ìì—´ë¡œ ì§ë ¬í™”        |
| `handler.earthling_mq`    | `produce(...)`           | Kafkaë¡œ ë©”ì‹œì§€ë¥¼ ë°œí–‰í•˜ëŠ” í•¨ìˆ˜                    |

---

## âœ… ì‚¬ìš© ì˜ˆì‹œ

```python
# DB ì¿¼ë¦¬ ì˜ˆì‹œ
from handler.EarthlingDBPool import exec
result = exec("SELECT * FROM anytable WHERE id=1")

# Elasticsearch ì €ì¥ ì˜ˆì‹œ
from handler.earthling_es import insert_list_to_es
insert_list_to_es([{"field": "value"}], "my_index", "doc_type")

# Kafka ë©”ì‹œì§€ ì†Œë¹„ ì˜ˆì‹œ
from handler.earthling_mq import consume
consume()

# Kafka ë©”ì‹œì§€ ë°œí–‰ ì˜ˆì‹œ
from handler.earthling_mq import produce
produce({"task_no": 1, "user_id": "john_doe"})
```

---

## ğŸ“ ë¹„ê³ 

* `settings.yml`ì€ í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í„°ë¦¬ì— ìœ„ì¹˜í•´ì•¼ í•˜ë©°, YAML ë¬¸ë²• ì˜¤ë¥˜ê°€ ì—†ë„ë¡ ì£¼ì˜í•´ì•¼ í•©ë‹ˆë‹¤.
* ë°ì´í„°ë² ì´ìŠ¤ ë¹„ë°€ë²ˆí˜¸, Kafka ì ‘ì† ì •ë³´ ë“±ì€ **í™˜ê²½ë³€ìˆ˜ ë˜ëŠ” ë³´ì•ˆ Vault**ë¥¼ í†µí•´ ê´€ë¦¬í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.
* Kafka ì„œë²„ê°€ ë¡œì»¬ì´ ì•„ë‹Œ ê²½ìš°, ë°˜ë“œì‹œ ë°©í™”ë²½ ì„¤ì • ë° ì¸ì¦ ì •ì±…ì„ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤.